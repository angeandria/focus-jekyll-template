---
layout: focus/single
sidebar:
  - image: "/assets/images/placeholder-logo.jpg"
    image_alt: "image"
    title: "My Title5555555" 
    text: "Some text here."
    nav:
      - main                  
---

{{ content }}


<ul>
    <li>Image : {{ page.featured-img }}</li>
    <li>Logo : {{ page.featured-logo }}</li>
    <li>Author : {{ page.author_profile }}</li>
    <li>Page title : {{ page.title }}</li>
    <li>Page url : {{ page.url }}</li>    
    <li>REDIRECT ME? {{ page.redirect_me }}</li>
</ul>    

{% if page.sidebar %}
        {% for s in page.sidebar %}
            SIDEBAR : {{ s.title }}        
        {% endfor %}
{% endif %}



{% assign url = page.url | split: '/' %}
URL : {{ url }}

{% assign url_parts = page.url | split: '/' %}
{% assign last_part = url_parts | last %}
{% assign formatted_last_part = last_part | replace: '-', ' ' %}
<!-- Display the formatted result -->
<p>{{ formatted_last_part }}</p>

---

{% if url contains 'topics' %}
PAGE TITLE ONLY WHEN HAS /TOPICS IN URL? {{ page.title}}
{% endif %}

<div class="archive">
    {% unless page.header.overlay_color or page.header.overlay_image %}
		{% comment %}<!-- CUSTOM -->{% endcomment %}
		{% include focus/taxonomy-description.html %}
    {% endunless %}
    
    <hr>
    
    <h1>RESOURCES, PAGES</h1>
    {% assign types_list = "resource, page" | split: ", " %}
    {% for type in types_list %}        
            {% include focus/post-display.html type=type topic=page.title format="list" order="desc" container_class="" type_class="" type-item_class="box-shadow" %}            
    {% endfor %}
    
    <hr>
    
    <h1>POSTS</h1>        
    {% for post in page.posts %}
      {% include archive-single.html %}
    {% endfor %}
</div>

}

<div id="debug-info">
    <h2>Debug Information</h2>
    <ul>
        <li>Window Location Pathname: <span id="debug-pathname"></span></li>
        <li>Attempted URL: <span id="debug-attempted-url"></span></li>
        <li>Extracted Topic Name: <span id="debug-topic-name"></span></li>
        <li>New URL for Redirect: <span id="debug-new-url"></span></li>
    </ul>
</div>

<script>
// Display current pathname
let currentPathname = window.location.pathname;
document.getElementById('debug-pathname').textContent = currentPathname;

// Check if the current page is the 404 page by title
if (document.title.includes('Oops') && currentPathname.includes('/topic/')) {
    // Attempt to extract the topic from the URL
    let attemptedUrl = currentPathname;
    document.getElementById('debug-attempted-url').textContent = attemptedUrl;

    // Extract the topic name after /topic/
    let topicName = attemptedUrl.substring(attemptedUrl.indexOf('/topic/') + '/topic/'.length);
    document.getElementById('debug-topic-name').textContent = topicName;

    // Construct the new URL with query parameters
    let newUrl = '/redirect?content=' + encodeURIComponent(topicName);
    document.getElementById('debug-new-url').textContent = newUrl;

    // Redirect to the new URL after a delay for debugging
    setTimeout(() => {
        window.location.href = newUrl;
    }, 3000); // 3-second delay for observation
} else {
    console.log('Conditions not met for redirection.');
}
</script>